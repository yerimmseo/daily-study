# REST API란 무엇인가

**REST란?**

REST(Reporesentational State Transfer)의 약자로 자원을 이름으로 구분하여 해당 자원의 상태로 주고 받는 모든 것을 의미

<br>

**즉, REST란**

1. HTTP URI(Uniform Resource Identifier)를 통해 자원(Resource)을 명시하고
2. HTTP Method(POST, GET, PUT, DELETE)를 통해
3. 해당 자원(URI)에 대한 CRUD Operation을 적용하는 것을 의미함

> **CRUD Operation이란**
<br>
CRUD는 대부분 컴퓨터 소프트웨어가 가지는 기본적인 데이터 처리 기능인 Create(생성), Read(읽기), Update(갱신), Delete(삭제)를 묶어서 일컫는 말로 REST에서 CRUD Operation 동작 예시는 다음과 같다. 
><br>⁎ Create: 데이터 생성 (POST)
><br>⁎ Read: 데이터 조회 (GET)
><br>⁎ Update: 데이터 수정 (PUT)
><br>⁎ Delete: 데이터 삭제 (DELETE)

<br>

**REST 구성 요소**

1. 자원(Resource): HTTP URI
2. 자원에 대한 행위(Verb): HTTP Method
3. 자원에 대한 행위의 내용(Representations): HTTP Message Pay Load

<br>

**REST의 특징**

*1)* Server-Client 구조(서버-클라이언트 구조)

- 일관적인 인터페이스로 분리되어 있어야 함. 따라서 서로간의 의존성이 줄어듬
- 자원을 가진 쪽이 서버, 자원을 요청하는 쪽이 클라이언트. 백엔드/프론트엔드의 나누는 기준이 됨

*2)* Stateless(무상태)

- 각 요청간 클라이언트의 context가 서버에 저장되어서는 안됨
- HTTP 프로토콜의 장점을 극대화하기 위한 방법이므로 REST 역시 HTTP 프로토콜처럼 Stateless Protocol의 성질을 가짐
- 세션 정보나 쿠키 정보를 별도로 저장하고 관리하지 않기 때문에 API 서버는 클라이언트의 요청만 단순히 처리하면 됨 → 서비스의 자유도가 높아지고 서버에서 불필요한 정보를 관리하지 않아 구현이 단순해지는 장점이 있음

*3)* Cacheable(캐시 처리 기능)

- WWW에서와 같이 클라이언트는 응답을 캐싱할 수 있어야 함
- 잘 관리되는 캐싱은 클라이언트-서버 간 상호작용을 부분적으로 또는 완전하게 제거하여 scalability와 성능을 향상 시킴
- 웹 표준 HTTP 프로토콜을 그대로 사용하므로 웹에서는 사용하는 기존 인프라를 그대로 활용할 수 있음

*4)* Self-descriptiveness(자체 표현 구조)

- REST API 메세지만 보고도 이를 쉽게 이해할 수 있도록 JSON을 이용해 직관적으로 이해가 가능한 자체 표현 구조로 되어있음
- 동사(Method) + 명사(URI)로 이루어져있어 어떤 메서드에 무슨 행위를 하는지 알 수 있음

*5)* Layered System(계층화)

- REST 서버는 다중 계층으로 구성될 수 있으며, 보안, 로드밸런싱, 암호화 계층을 추가해 구조상의 유연성을 둘 수 있고, PROXY, 게이트웨이 같은 네트워크 기반의 중간 매체를 사용할 수 있게 함
- API 서버는 순수한 비즈니스 로직을 수행하고 그 앞단에 보안, 로드밸런싱, 암호화, 사용자 인증 등을 추가하여 구조상의 유연성을 줄 수 있음

*6)* Uniform Interface(인터페이스 일관성)

- HTTP 표준에만 따른다면 안드로이드/IOS 플랫폼이든 특정 언어나 기술에 종속되지 않고 모든 플랫폼에 사용 가능하며, URI로 지정한 리소스에 대한 조작이 가능한 아키텍쳐 스타일을 의미함

<br>

**REST의 목표**

- 구성 요소 상호작용의 규모 확장성
- 인터페이스의 범용성
- 구성 요소의 독립적인 배포
- 중간적 구성 요소를 이용해 응답 지연 감소, 보안을 강화, 레거시 시스템을 인캡슐레이션

REST의 목표를 가지고 작업한다면 백엔드와 프론트엔드 영역을 효율적으로 분리할 수 있어서 규모 확장성에 있어 장점이 생기고, 각자 독립적으로 배포되어 버전 관리할 수 있음

자원과 직접적인 통신을 하고 있는 백엔드가 분리되어 있기 때문에 접근하는 것에 있어서나 자원을 캡슐화하여 보낼 수 있어서 보안이 강화되는 장점이 있음

---

**REST API란?**

REST의 원리를 따르는 API를 의미함. REST API를 올바르게 설계하기 위해 지켜야 하는 몇가지 규칙이 있음

* *주의할 점*

- 슬래시 구분자(/)는 계측 관계를 나타내는 것에 사용 (ex. board/write)
- URI 마지막 문자로 슬래시(/)를 포함하지 않음
- 하이픈(-)은 URI 가동성을 높이는데 사용. 밑줄(_)은 사용하지 않음
- URI 경로에 소문자 사용
- 파일 확장자 포함하지 않음

<br>

**REST API 설계 예시**

1. URI는 동사보다는 명사를, 대문자보다는 소문자를 사용해야 함

```
bad example  : http://example.com/Running
good example : http://example.com/running
```

2. 마지막에 슬래시(/)를 포함하지 않음

```
bad example  : http://example.com/test/
good example : http://example.com/test
```

3. 언더바 대신 하이픈을 사용함

```
bad example  : http://example.com/test_blog
good example : http://example.com/test-blog
```

4. 파일 확장자는 URI에 포함하지 않음

```
bad example  : http://example.com/photo.jpg
good example : http://example.com/photo
```

5. 행위를 포함하지 않음

```
bad example  : http://example.com/delete-post/1
good example : http://example.com/post/1
```

<br>

| METHOD | 역할 |
| --- | --- |
| GET | GET을 통해 해당 리소스를 조회, 리소스를 조회하고 해당 도큐먼트에 대한 자세한 정보를 가져옴 |
| POST | POST를 통해 해당 URI를 요청하면 리소스를 생성 |
| PUT | PUT을 통해 해당 리소스를 수정 |
| PATCH | PATCH를 통해 해당 리소스를 수정 |
| DELETE | DELETE를 통해 해당 리소스를 삭제 |

<br>

**GET 방식**

- 클라이언트에서 서버로 데이터를 전달할 때, 주소 뒤에 “이름”과 “값”이 결합된 스트링 형태로 전달
- 주소창에 쿼리 스트링이 그대로 보여지기 때문에 보안성이 떨어짐
- 길이에 제한이 있음(=전송 데이터의 한계)
- POST 방식보다 상대적으로 전송 속도가 빠름

<br>

**POST 방식**

- 일정 크기 이상의 데이터를 보내야 할 때 사용
- 서버로 보내기 전에 인코딩하고, 전송 후 서버에서는 다시 디코딩 작업 진행
- 주소창에 전송하는 데이터의 정보가 노출되지 않아 GET 방식에 비해 보안성이 높음
- 속도가 GET 방식에 비해 느림
- 쿼리 스트링(문자열) 데이터 뿐만 아니라 라디오 버튼, 텍스트 박스 같은 객체들의 값도 전송 가능

<br>

**GET 방식과 POST 방식의 차이점**

| GET | POST |
| --- | --- |
| - 주로 웹 브라우저가 웹 서버에 데이터를 요청할 때 사용
- 웹 브라우저에서 웹 서버로 전달되는 데이터가 인코딩되어 URL에 붙음
- 전달되는 데이터가 255개의 문자를 초과하면 문제가 발생할 수 있음 | - 웹 브라우저가 웹 서버에 데이터를 전달하기 위해 사용
- 전달되는 데이터가 URL에 표시되지 않음
- 웹 서버에 많은 데이터를 전달하기 위해서는 POST 방식을 사용하는 것이 바람직함 |

<br>

**PUT 방식과 PATCH 방식의 차이**

| PUT | PATCH |
| --- | --- |
| - 자원의 전체 교체 및 수정이 필요할 때 사용 | - 자원의 일부분만 수정되거나 교체될 때 사용 |

DB의 특정 컬럼만 수정하고자 한다면 PATCH를 사용, 전부 다 수정되어야 하는 사항이라면 PUT을 사용

<br>

**응답 상태 코드**

| 상태 코드 | 설명 |
| --- | --- |
| 200 | 클라이언트 요청을 정상적으로 수행 |
| 201 | 클라이언트가 어떠한 리소스 생성을 요청, 해당 리소스가 성공적으로 생성됨(POST를 통한 리소스 생성 작업 시) |
| 301 | 클라이언트가 요청한 리소스에 대한 URI가 변경되었을 때 사용하는 응답 코드 |
| 400 | 클라이언트의 요청이 부적절한 경우 사용하는 응답 코드 |
| 401 | 클라이언트가 인증되지 않은 상태에서 보호된 리소스를 요청했을 때 사용하는 응답 코드(예: 로그인하지 않은 유저 로그인 시) |
| 403 | 유저 인증 상태와 관계없이 응답하고 싶지 않은 리소스를 클라이언트가 요청했을 때 사용하는 응답코드(403 보다는 400이나 404를 사용할 것을 권고) |
| 405 | 클라이언트가 요청한 리소스에서는 사용 불가능한 메서드를 이용했을 경우 사용하는 응답 코드 |
| 500 | 서버에 문제가 있을 경우 사용하는 응답 코드 |

<br>

**RESTful이란**

REST의 원리를 따르는 시스템을 의미함. 하지만, REST를 사용했다 하여 모두가 RESTful한 것은 아님. REST API의 설계 규칙을 올바르게 지킨 시스템을 RESTful하다 말할 수 있음.

모든 CRUD 기능을 POST로 처리하는 API, URI 규칙을 올바르게 지키지 않은 API와 같이 REST API의 설계 규칙을 올바르게 지키지 못한 시스템은 REST API를 사용하였지만 RESTful하지 못한 시스템이라 할 수 있음.
