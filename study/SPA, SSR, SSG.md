
# SPA(Single Page Application)

**SPA란?**

SPA는 ‘Single Page Application’의 약자로, 단일 페이지로 구성된 웹 애플리케이션을 말한다. SPA가 등장하기 전 웹 애플리케이션을 구성하던 방식인 서버 사이드 렌더링(SSR)의 경우, 화면에 보여질 리소스를 서버로 요청하고, 서버로 부터 받아온 리소스를 렌더링했다.

하지만, SPA의 경우 렌더링의 역할을 서버에게 넘기지 않고 브라우저에서 처리하는 방식이다. 웹 애플리케이션에 필요한 모든 정적 리소스를 최초에 한 번 다운로드하고, 이후 새로운 페이지 요청 시 페이지 갱신에 필요한 데이터만 전달받아 페이지를 갱신하게 된다.

<br>

**SPA의 장점**

- 새로운 페이지 요청 시 전체를 렌더링하지 않고 변경되는 부분만 갱신하기 때문에 전체적인 트래픽 감소와 렌더링에서 좋은 효율을 가짐
- 새롭게 갱신되는 부분만 렌더하기 때문에 새로고침이 발생하지 않아 화면 깜빡임 없이 빠른 화면 이동이 가능함
- 트래픽의 감소와 속도, 반응성의 향상으로 인해 앱처럼 자연스러운 사용자 경험(UX)를 제공하며 모바일 사용이 증가하는 시점에는 이는 큰 장점이 됨
- 모듈화 또는 컴포넌트별 개발이 용이함
- 백엔드와 프론트엔드가 비교적 명확하게 구분됨

<br>

**SPA의 단점**

- 웹 애플리케이션에 필요한 정적 리소스를 한 번에 다운로드 하기 때문에 초기 구동 속도가 느림
- SPA 구조 상 데이터 처리를 클라이언트에서 하는 경우가 많은데, 해당 로직들은 JavaScript를 통해 구현되므로 코드가 외부에 노출되는 보안적인 문제가 있음
- 검색엔진 최적화(SEO)가 어려움
    
    > SPA가 검색엔진 최적화(SEO)에 부적합한 이유?
    >
    > 검색엔진이 크롤링할 때 JavaScript를 실행하지 않고 애플리케이션이 로드되기 전의 빈 상태의 코드를 크롤링하기 때문에 인덱싱이 제대로 이루어지지 않음
    > 
    

<br><br>

# SSR (Server Side Rendering)

서버에서 사용자에게 보여줄 페이지를 모두 구성하여 사용자에게 페이지를 보여주는 방식이다. JSP/Servlet의 아키텍처에서 이 방법을 사용한다.

(클라이언트 측 또는 유니버셜 앱을 서버의 HTML로 렌더링하는 방식이다. 브라우저에서 응답을 받기 전에 데이터 패칭 및 템플릿 작성이 처리되므로 클라이언트에서 위 행위에 대한 추가 왕복이 발생하지 않는다.)

![Untitled](SPA,%20SSR,%20SSG%20cd6f95a5115b4f53a526188f71450206/Untitled.png)

**SSR 동작 방식**

1. 사용자가 웹 페이지를 방문(request)하면, 서버는 리소스를 확인하여 페이지 내에 있는 서버측 스크립트를 실행 후 HTML 컨텐츠를 컴파일 및 준비
2. 컴파일된 HTML은 추가 렌더링 및 표시를 위해 클라이언트 브라우저로 전송(response)
3. 브라우저는 HTML을 다운로드하고 최종 사용자가 사이트를 볼 수 있도록 함
4. 브라우저는 자바스크립트를 다운로드하고 실행하면서 페이지를 대화형(interactive)으로 만듦
5. 사용자가 페이지를 이동할 경우, 위 동작을 반복

<br>

**SSR 장점**

- 초기 페이지 로드시간이 빠름(FP 및 FCP가 빠름). 렌더링이 준비된 HTML 파일을 브라우저에서 로드하기 때문에 CSR에 비해 더 빠름
- 서버에서 페이지 로직 및 렌더링을 실행하면 많은 자바스크립트를 클라이언트에 보내지 않아도 되므로 TTI(Time to Interactive)를 빠르게 수행할 수 있음
- SEO에 친화적임. 이미 다 만들어진 페이지를 검색엔진 크롤러가 요청에 대한 응답으로 받기 때문
- 클라이언트 하드웨어 및 소프트웨어 성능에 영향을 덜 받음. 일반적으로 서버는 더 높은 컴퓨팅 성능과 훨씬 더 높은 네트워킹 속도를 가진 시스템임. 클라이언트에서는 서버에서 완성된 페이지만 렌더링해주면 됨. 즉, 클라이언트의 부담이 CSR에 비해 덜함.

<br>

**SSR 단점**

- 페이지 이동 시 마다 서버에서 페이지를 생성하는데 시간이 걸리기 때문에 TTFB(Time to First Byte)가 느림.
- 페이지 로드가 너무 무겁다면 오히려 사용자 경험을 개선하는게 아니라 해칠 수 있음. 초기 페이지 로드 시 데이터가 많이 필요한 대시보드가 그 예.
- 서버는 항상 각 요청이 들어올 때마다 HTML을 생성하기 때문에 CDN 수준에서의 컨텐츠 캐시가 되지 않음
- 서버의 호스팅이 필요. 클라이언트에서 자바스크립트를 이용해 렌더링하는 CSR에 비해 서버 사이드에서 HTML 파일과 안에 내용을 생성해야 하기 때문에 서버 호스팅이 필요함.
- CSR에 비해 더 많은 개발 노력이 필요하며 SSR 프레임워크를 사용한다면 추가적인 러닝 커브에 대한 비용이 발생.

<br><br>

# CSR (Client Side Rendering)

**개념**

사용자의 요청에 따라 필요한 부분만 응답 받아 렌더링 하는 방식, SPA가 채택하는 방식

<br>

**동작 과정**

![Untitled](SPA,%20SSR,%20SSG%20cd6f95a5115b4f53a526188f71450206/Untitled%201.png)

1. 클라이언트에서 초기 화면을 로드하기 위해 서버에 요청을 보냄
2. 서버는 화면에 표시하는 데 필요한 완전한 리소스의 응답
3. SSR에 비해 모든 js 파일을 다운받아야 하기 때문에 초기 로딩 시간이 오래 걸림

<br>

**장점**

- 빠른 속도와 서버 부하 감소 → 변경된 부분과 데이터만 가져오므로 서버사이드 렌더링보다 빠른 속도를 보임
- 변경된 부분만 요청함으로써 서버의 부담을 줄일 수 있음
- 사용자 친화적 (페이지 안에 컨텐츠를 클릭하여 다음 단계로 전환하는 과정에서 링크가 없기 때문에 깜빡임 없이 부드러운 이동을 경험)

<br>

**단점**

- SEO에 불리함 (자바스크립트를 사용하여 상호 작용 후에 내용을 로드하기 때문에 웹 크롤러가 페이지를 색인화하려고 하면 빈 페이지처럼 보이게 됨)
- 초기 로딩 속도가 오래 걸림 → 초기에 모든 js 파일을 다운 받아와야 함

<br><br>

# SSG (Static Site Generator)

SSR처럼 서버로부터 완성된 HTML을 받아오지만 다른 점은 HTML 파일의 생성 시점이 **빌드 타임**이라는 것이다. Static이라는 용어가 들어간 것은 HTML이 정적이라는 것이지 페이지가 정적이라는게 아니므로 오해하지 말아야 함. Next.js에서 권장하는 렌더링 방식이기도 함

<br>

**SSG 동작 방식**

1. 사용자가 웹 페이지를 방문하면(request), 엣지 캐싱(edge caching)된 HTML 클라이언트로 반환해 줌
2. 브라우저는 HTML을 다운로드하고 최종 사용자가 사이트를 볼 수 있도록 함
    
    > 엣지 캐싱(edge caching)이란?
    >
    > 최종 사용자에게 더 가까운 컨텐츠를 저장하기 위해 캐싱 서버를 사용하는 것. 대표적으로 CDN을 많이 사용
    > 

<br>

**SSG 장점**

- 빌드 타임에 HTML 파일이 생성되기 때문에 빠른 FP, FCP, TTI를 제공함. 또한 매 요청마다 생성하는 것이 아니므로, SSR과 달리 일관성 있게 빠른 TFB를 달성할 수 있음
- build 명령은 실제로 사이트를 방문하는 사람의 워크플로를 벗어나므로 시간이 좀 걸리더라도 문제가 되지 않음

<br>

**SSG 단점**

- 모든 URL에 대해 개별 HTML 파일을 생성해야 함. 따라서 URL을 미리 예측할 수 없거나 URL을 예측할 수 없으면 적용이 어려움

<br><br>

### ** 렌더링 방식 선택 기준 **

서비스, 프로젝트, 컨텐츠의 성격에 따라 달라짐

*상황1)*

1. 상위 노출이 필요
2. 누구에게나 동일한 내용을 노출
3. 페이지마다 데이터가 자주 변경

*→ Server Side Rendering*

<br>

*상황2)*

1. 개인정보 데이터 기준으로 구성
2. 보다 나은 사용자 경험을 제공
3. 상위 노출보다 고객의 데이터 보호가 더 중요

*→ Client Side Rendering*
